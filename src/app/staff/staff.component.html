<div class="tui-container">
  <form
    [formGroup]="usersForm"
    (ngSubmit)="searchUsers()"
    class="search-and-new-block"
  >
    <div class="search-block">
      <tui-input
        [tuiTextfieldCleaner]="true"
        class="search"
        formControlName="name"
      >
        Поиск
      </tui-input>
    </div>

    <button
      tuiIconButton
      type="submit"
      icon="tuiIconSearch"
      appearance="white"
      size="l"
      class="search-user-button"
    ></button>

    <button
      tuiButton
      type="button"
      appearance="accent"
      class="new-user-button"
      size="l"
      [routerLink]="['/users/new-user']"
    >
      new
    </button>
  </form>

  <div class="content">
    <tui-loader *ngIf="loading" class="loader"> </tui-loader>
    <div class="" *ngIf="!loading">
      <ul class="staff-list" *ngIf="users$ | async as users">
        <li *ngFor="let user of users$ | async" class="staff-list-item">
          <button
            tuiButton
            appearance="custom"
            class="staff-list-button"
            [routerLink]="['/users/user/', user.id]"
          >
            <tui-avatar
              *ngIf="user.pictureUrl"
              class="icon-user-avatar"
              [rounded]="true"
              text="avatar"
              size="l"
              [avatarUrl]="user.pictureUrl || 'tuiIconUser'"
            ></tui-avatar>
            <tui-avatar
              *ngIf="user.pictureUrl == null"
              class="icon-user-avatar"
              [rounded]="true"
              text="avatar"
              size="l"
              avatarUrl="tuiIconUser"
            ></tui-avatar>

            <section>
              <p class="staff-user-name">{{ user.username }}</p>
              <p class="staff-user-post">{{ user.post }}</p>
            </section>
          </button>
        </li>
      </ul>
      <tui-pagination
        *ngIf="pages$ | async as pages"
        [length]="pages"
        [index]="index"
        class="pagination"
        (indexChange)="goToPage($event)"
      ></tui-pagination>
    </div>
  </div>
</div>
<div class="" *tuiLet="users$ | async as users">
  <div class="not-users" *ngIf="users == null && !loading">
    <p>Сотрудников по данному запросу не найдено</p>
  </div>
</div>
