<div class="tui-container">
  <div class="create-event">
    <div class="back-and-title">
      <tui-svg
        src="tuiIconBackCircleLarge"
        class="back"
        routerLink="/events"
      ></tui-svg>
      <h2 class="title-new-product">Добавление события</h2>
    </div>

    <form [formGroup]="eventForm"  class="form">
      <div class="grid">
        <div class="col-1">
          <tui-input formControlName="name" class="product-form-item">
            Название
            <input tuiTextfield type="text" />
          </tui-input>
          <div
            class="error-message"
            *ngIf="
              eventForm.get('name')?.invalid &&
              (eventForm.get('name')?.dirty ||
                eventForm.get('name')?.touched ||
                errors)
            "
          >
            <span>Обязательное поле</span>
          </div>
          <tui-input formControlName="address" class="product-form-item">
            Адрес
            <input tuiTextfield type="text" />
          </tui-input>

          <tui-select
            class="product-form-item"
            tuiTextfieldSize="l"
            formControlName="city"
            *ngIf="cities$ | async as sities"
            [valueContent]="citiesContent"
          >
            Город

            <tui-data-list-wrapper
              *tuiDataList
              [items]="sities"
              [itemContent]="citiesContent"
            ></tui-data-list-wrapper>
          </tui-select>
          <div
            class="error-message"
            *ngIf="
              eventForm.get('city')?.invalid &&
              (eventForm.get('city')?.dirty ||
                eventForm.get('city')?.touched ||
                errors)
            "
          >
            <span>Обязательное поле</span>
          </div>
        </div>
        <div class="col-2">
          <tui-input-date-time formControlName="date" class="product-form-item">
            дата проведения
          </tui-input-date-time>
          <div
            class="error-message"
            *ngIf="
              eventForm.get('date')?.invalid &&
              (eventForm.get('date')?.dirty ||
                eventForm.get('date')?.touched ||
                errors)
            "
          >
            <span>Обязательное поле</span>
          </div>

          <ng-template #citiesContent let-item>
            <div class="city-item">
              {{ item.name }}
            </div>
          </ng-template>
          <tui-input-files
            class="product-form-item"
            link="Добавить изображение"
            label=" "
            *ngIf="!control.value"
            accept="image/*"
            [formControl]="control"
            (reject)="onReject($event)"
          ></tui-input-files>

          <tui-files class="product-form-item">
            <tui-file
              *ngIf="loadedFiles$ | async as file"
              [file]="file"
              (removed)="removeFile()"
            ></tui-file>

            <tui-file
              *ngIf="rejectedFiles$ | async as file"
              state="error"
              [file]="file"
              (removed)="clearRejected()"
            ></tui-file>

            <tui-file
              *ngIf="loadingFiles$ | async as file"
              state="loading"
              [file]="file"
            ></tui-file>
          </tui-files>
          <div>
            <label tuiLabel="Онлайн">
              <tui-toggle
                formControlName="online"
                [showIcons]="true"
                size="l"
              ></tui-toggle>
            </label>
          </div>
        </div>
      </div>
      <tui-text-area formControlName="description" class="product-form-item">
        Описание мероприятия
      </tui-text-area>

      <tui-text-area formControlName="materials" class="product-form-item">
        Полезные ссылки
      </tui-text-area>
      <button
        tuiButton
        type="submit"
        size="m"
        [showLoader]="loading"
        appearance="accent"
        class="save-button"
        (click)="saveEvent()"
      >
        Сохранить
      </button>
    </form>
  </div>
</div>
