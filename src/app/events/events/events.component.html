<div class="tui-container">
  <form
    [formGroup]="eventForm"
    (ngSubmit)="search()"
    class="search-and-new-block"
  >
    <div class="search-block">
      <tui-input
        [tuiTextfieldCleaner]="true"
        class="search"
        formControlName="name"
      >
        Поиск
      </tui-input>
    </div>

    <button
      tuiIconButton
      type="submit"
      icon="tuiIconSearch"
      appearance="white"
      size="l"
      class="search-user-button"
    ></button>

    <button
      tuiButton
      type="button"
      appearance="accent"
      class="new-button"
      size="l"
      routerLink="/events/create-event"
    >
      new
    </button>
  </form>

  <div class="content">
    <form [formGroup]="filterForm">
      <tui-filter
        formControlName="filters"
        size="s"
        class="filters"
        [items]="['предстоящие', 'прошедшие']"
        (toggledItem)="onToggledItemChange($event)"
      ></tui-filter>
    </form>

    <ng-template #emptyPage
      ><div class="events">Мероприятий пока нет</div></ng-template
    >
    <div class="events" *ngIf="events$ | async as events; else emptyPage">
      <div
        class="event"
        *ngFor="let event of uncomingEvents$ ? events : events"
        [routerLink]="['/events/event/', event.id]"
      >
        <img
          class="event__img"
          [src]="
            event.pictureUrl
              ? event.pictureUrl
              : 'https://cdn1.ozone.ru/s3/multimedia-d/6494370445.jpg'
          "
        />
        <div class="event__info">
          <h3>{{ event.name }}</h3>
          <p class="event__p">{{ event.address }}</p>
          <p class="event__p">
            {{ event.date | date : "dd.mm.yyyy" }}
            {{ event.date | date : "h:mm" }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
